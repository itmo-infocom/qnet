Сборка:
=======
`make qcrypt`

Дополнительно требуется:
=======

Прокси на порту 3128 (на машине, где установлен декодер)

tcpmux - находится в директории выше - для мультиплексирования (`make tcpmux`)


Параметры запуска:
=======

`./qcrypt -h` - справка


`./qcrypt [config.cfg]`

- config.cfg - файл конфигурации (можно опустить)



Схема запуска:
=======


Прокси (squid на порту 3128)


tcpdemux (слушает подключения на порту 3333, демультиплексирует, перенаправляет на 127.0.0.1:3128):

`./tcpmux —demux 3333 127.0.0.1:3128`


Декодер (слушает подключения на порту 2222, декодирует и кодирует обратный, перенаправляет на 127.0.0.1:3333, канал управления на порту 77):

`./qcrypt decoder.cfg`


Кодер (слушает подключения на порту 7777, кодирует и декодирует обратный, перенаправляет на 127.0.0.1:2222, канал управления на порту 78):

`./qcrypt coder.cfg`


tcpmux (слушает подключения на порту 8888, мультиплексирует, перенаправляет на 127.0.0.1:7777):

`./tcpmux 8888 127.0.0.1:7777`


Клиент (веб-браузер, прокси настроен на 127.0.0.1:8888)


Управление:
=======
Подключение на порт управления:

`nc 127.0.0.1 77`


Команды: 

r - перечитывание ключей (кроме mode=0)

quit - завершение работы


Для пересылки ключа по cUrl (при mode=0):
=======

Собрать проект в директории выше KeyByCURL и запустить до передачи данных (включения tcpmux)

`./KeyByCURL.out 127.0.0.1:78 127.0.0.1:77`

Cfg-файлы
=======

// РЕЖИМ ЧТЕНИЯ КЛЮЧЕЙ (int) :

//	0 - чтение данных по curl запросу (./KeyByCURL.out)

//	1 - чтение данных посимвольно

//	2 - plug&play

`mode = 1;`

// РЕЖИМ РАБОТЫ (int) :

//	0 - Декодер

//	1 - Кодер

`coder = 1;`

//port (int) - слушающий порт

`port = 7777;`

//IP (string) - IP подключения

`ip = "127.0.0.1";`

//portDest (int) - порт подключения

`portDest = 2222;`

//portCtrl (int) - порт контроля

`portCtrl = 78;`

//if mode == 1 - ДИРЕКТОРИЯ КЛЮЧЕЙ И ОКОНЧАНЕ ФАЙЛА

`keyDir = "/opt/qcrypt/share/qbcrypt";`

`keyTail = "_Bob.key";`

//if mode == 2 - ФАЙЛ КЛЮЧЕЙ

`keyFile = "/opt/qcrypt/share/qacrypt/Bob_Code.txt";`

